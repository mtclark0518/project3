{"version":3,"sources":["../../../../src/app/typescripts/free/collapse/collapse.directive.ts"],"names":[],"mappings":"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","file":"collapse.directive.js","sourceRoot":"","sourcesContent":["// todo: add animations when https://github.com/angular/angular/issues/9947 solved\r\nimport {\r\n  Directive, ElementRef, EventEmitter, HostBinding, Input, OnInit, Output,\r\n  Renderer, style\r\n} from '@angular/core';\r\n\r\n\r\nexport class CollapseDirective implements OnInit {\r\n\r\n   public showBsCollapse: EventEmitter<any> = new EventEmitter();\r\n   public shownBsCollapse: EventEmitter<any> = new EventEmitter();\r\n   public hideBsCollapse: EventEmitter<any> = new EventEmitter();\r\n   public hiddenBsCollapse: EventEmitter<any> = new EventEmitter();\r\n\r\n\r\n  /** This event fires as soon as content collapses */\r\n   public collapsed: EventEmitter<any> = new EventEmitter();\r\n  /** This event fires as soon as content becomes visible */\r\n   public expanded: EventEmitter<any> = new EventEmitter();\r\n  // shown\r\n  // @HostBinding('class.in')\r\n  // @HostBinding('class.show')\r\n  // @HostBinding('attr.aria-expanded')\r\n  public isExpanded = true;\r\n  // hidden\r\n  // @HostBinding('attr.aria-hidden')\r\n  public isCollapsed = false;\r\n  // stale state\r\n  // @HostBinding('class.collapse')\r\n  public isCollapse = true;\r\n  // animation state\r\n  // @HostBinding('class.collapsing')\r\n  public isCollapsing = false;\r\n  public collapsing = false;\r\n\r\n\r\n   public collapse: boolean;\r\n   public animationTime = 500;\r\n\r\n  public maxHeight: number;\r\n\r\n\r\n  protected _el: ElementRef;\r\n  protected _renderer: Renderer;\r\n\r\n  public constructor(_el: ElementRef, _renderer: Renderer) {\r\n    this._el = _el;\r\n    this._renderer = _renderer;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this._el.nativeElement.classList.add('show');\r\n    this.maxHeight = this._el.nativeElement.scrollHeight;\r\n    this._el.nativeElement.style.transition = this.animationTime + 'ms ease';\r\n\r\n    if (!this.collapse) {\r\n      this._el.nativeElement.classList.remove('show');\r\n      this.hide();\r\n    } else {\r\n      this.show();\r\n    }\r\n\r\n    this.isExpanded = this.collapse;\r\n  }\r\n\r\n  /** allows to manually toggle content visibility */\r\n  public toggle(): void {\r\n    if (!this.collapsing) {\r\n      if (this.isExpanded) {\r\n        this.hide();\r\n      } else {\r\n        this.show();\r\n      }\r\n    }\r\n  }\r\n\r\n  /** allows to manually hide content */\r\n  public hide(): void {\r\n    this.collapsing = true;\r\n    this.hideBsCollapse.emit();\r\n    this.isCollapse = false;\r\n    this.isCollapsing = true;\r\n\r\n    this.isExpanded = false;\r\n    this.isCollapsed = true;\r\n\r\n    const container = this._el.nativeElement;\r\n\r\n    container.classList.remove('collapse');\r\n    container.classList.remove('show');\r\n    container.classList.add('collapsing');\r\n\r\n    this._renderer.setElementStyle(container, 'height', '0px');\r\n\r\n    setTimeout(() => {\r\n      container.classList.remove('collapsing');\r\n      container.classList.add('collapse');\r\n      this.hiddenBsCollapse.emit();\r\n      this.collapsing = false;\r\n    }, this.animationTime);\r\n    this.collapsed.emit(this);\r\n  }\r\n\r\n  /** allows to manually show collapsed content */\r\n  public show(): void {\r\n    if (!this.isExpanded) {\r\n      this.collapsing = true;\r\n      this.showBsCollapse.emit();\r\n      this.isCollapse = false;\r\n      this.isCollapsing = true;\r\n\r\n      this.isExpanded = true;\r\n      this.isCollapsed = false;\r\n\r\n      const container = this._el.nativeElement;\r\n\r\n      container.classList.remove('collapse');\r\n      container.classList.add('collapsing');\r\n\r\n      setTimeout(() => {\r\n        this._renderer.setElementStyle(container, 'height', this.maxHeight + 'px');\r\n      }, 10);\r\n\r\n      setTimeout(() => {\r\n        container.classList.remove('collapsing');\r\n        container.classList.add('collapse');\r\n        container.classList.add('show');\r\n        this.shownBsCollapse.emit();\r\n        this.collapsing = false;\r\n      }, this.animationTime - (this.animationTime * 0.5));\r\n      this.expanded.emit(this);\r\n    }\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\r\n  selector: '[mdbCollapse]',\r\n  exportAs: 'bs-collapse',\r\n  /* tslint:disable-next-line */\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'showBsCollapse': [{ type: Output, args: ['showBsCollapse', ] },],\n'shownBsCollapse': [{ type: Output, args: ['shownBsCollapse', ] },],\n'hideBsCollapse': [{ type: Output, args: ['hideBsCollapse', ] },],\n'hiddenBsCollapse': [{ type: Output, args: ['hiddenBsCollapse', ] },],\n'collapsed': [{ type: Output },],\n'expanded': [{ type: Output },],\n'collapse': [{ type: Input },],\n'animationTime': [{ type: Input },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}